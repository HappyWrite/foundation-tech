# Confilter需求

* 黑白名单过滤（可应用业务:短信号码,支付uid等）
* 词条过滤（可应用业务:短信文本,用户slogan等其他一切和文本相关的业务）

## 黑白名单过滤
* 功能维度:输入字符串，名单中是否能够匹配命中
* 时间维度：名单中的词表，每个词能做到单独的时间维度控制。
    
    比如13810001000这个号码从现在开始生效，3个小时之后失效。

## 词条过滤
* 功能维度：输入字符串，其中是否包含词典中的任意词条，如果包含则命中。
    
    * 单模式匹配
    
        比如词表中有 ”发票“ 这个词条，输入的字符串是“请关注我的得到账户，联系我可代开发票，多谢各位关照”，则匹配命中。
    
    * 多模式匹配
        
        >有时文本中出现一个词并不一定能马上判定为敏感词。比如上例中，出现发票不一定是就是敏感词。发票本身是一个中性词，但是当发票和其他词比如“代开”，“代办”一起出现，就可判定为敏感词。
        
        即多模匹配是多个词同时出现才认为是敏感词。多模词典中，每个词之间用“&”符分隔开。例如 代办&发票
        
        * 距离
            
            在多模匹配中，对于一个词条如“代办&发票”。倘若发过来的是文本很长，有几万字。“代办”出现在前面， “发票”出现在后面，这种情况下也是没有什么意义的。因此多模匹配需要指定多大的距离是有意义的，当两个词之间的距离大于距离时，不认为命中。

tips
~~~
黑白名单和词表过滤，虽然从业务上是不同的需求。
但是从技术而言，如果真的拆分成个两个服务是没有必要的。 
目前虽然需求迫切的是黑白名单，但只着眼于眼下的话， 做好了黑白名单是没有办法满足词表服务的。
反过来，做好了词表服务却是可以适配黑白名单服务的。 
这其实才是confilter服务的初衷。